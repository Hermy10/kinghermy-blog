<!DOCTYPE html><html lang="en"> <head><!-- Prevent search indexing for theme demo page --><!-- REMOVE FOR YOUR SITE --><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Astro v5.13.7"><!-- Favicons --><link rel="apple-touch-icon" sizes="180x180" href="/kinghermy-blog/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/kinghermy-blog/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/kinghermy-blog/favicon-16x16.png"><link rel="manifest" href="/kinghermy-blog/site.webmanifest"><!-- Canonical URL --><link rel="canonical" href="https://hermy10.github.io/kinghermy-blog/admin/"><!-- Primary Meta Tags --><title>Admin | Kinghermy</title><meta name="title" content="Admin | Kinghermy"><meta name="description" content="Local editor to draft posts."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://hermy10.github.io/kinghermy-blog/admin/"><meta property="og:title" content="Admin | Kinghermy"><meta property="og:description" content="Local editor to draft posts."><meta property="og:image" content="https://hermy10.github.io/kinghermy-blog/saral-og.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://hermy10.github.io/kinghermy-blog/admin/"><meta property="twitter:title" content="Admin | Kinghermy"><meta property="twitter:description" content="Local editor to draft posts."><meta property="twitter:image" content="https://hermy10.github.io/kinghermy-blog/saral-og.jpg"><!-- RSS Auto-discovery --><link rel="alternate" type="application/rss+xml" title="Kinghermy Blog RSS Feed" href="https://hermy10.github.io/rss.xml"><link rel="stylesheet" href="/kinghermy-blog/_astro/_slug_.CvPSgOGa.css"><script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/kinghermy-blog/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.11.2 - MIT QwikDev */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,l,d,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(d=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(l=setTimeout(v,(null==s?void 0:s.fallbackTimeout)||1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.11.2":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<d.length;n++)(o=r.createElement("script")).innerHTML=d[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(l)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/kinghermy-blog/~partytown/']");if(r)e.newDocument.body.append(r)})})(document);</script></head> <body class="text-foreground bg-background font-light dark:text-foreground-dark dark:bg-background-dark transition-colors"> <header class="fixed top-0 w-full z-40 bg-background/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-foreground/10 dark:border-white/10"> <nav class=""> <div class="app-container flex justify-between items-center py-4 md:py-5"> <a href="/kinghermy-blog/" aria-label="Home"> <img src="/kinghermy-blog/_astro/crown.CL6QWeZr_Z1PnrXa.webp" alt="Kinghermy logo" loading="lazy" decoding="async" fetchpriority="auto" width="36" height="36"> </a> <div class="gap-8 hidden md:flex items-center"> <a href="/kinghermy-blog/" class="text-lg" target="_self" data-astro-cid-rieiwi5x> Home </a> <a href="/kinghermy-blog/blog" class="text-lg" target="_self" data-astro-cid-rieiwi5x> Blog </a> <a href="/kinghermy-blog/about" class="text-lg" target="_self" data-astro-cid-rieiwi5x> About </a>  <div class="border-[1px] border-foreground dark:border-foreground-dark rounded-full flex justify-center items-center text-foreground dark:text-foreground-dark [&#38;>*:hover]:brightness-75 md:opacity-80 [&#38;>*]:cursor-pointer" data-astro-cid-lgn464si> <button data-theme="theme-auto" aria-label="Auto Theme" title="Set theme to follow system preference" class="theme-button theme-auto" data-astro-cid-lgn464si> <svg width="1em" height="1em" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:brightness-auto">   <symbol id="ai:mdi:brightness-auto" viewBox="0 0 24 24"><path fill="currentColor" d="m14.3 16l-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69L8.69 4H4v4.69L.69 12L4 15.31V20h4.69L12 23.31L15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></symbol><use href="#ai:mdi:brightness-auto"></use>  </svg> </button> <button data-theme="theme-light" aria-label="Light Theme" title="Set theme to light" class="theme-button theme-light" data-astro-cid-lgn464si> <svg width="1em" height="1em" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:white-balance-sunny">   <symbol id="ai:mdi:white-balance-sunny" viewBox="0 0 24 24"><path fill="currentColor" d="m3.55 19.09l1.41 1.41l1.8-1.79l-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6s6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71l1.8 1.79l1.41-1.41l-1.79-1.8M20.45 5l-1.41-1.4l-1.8 1.79l1.42 1.42M13 1h-2v3h2M6.76 5.39L4.96 3.6L3.55 5l1.79 1.81zM1 13h3v-2H1m12 9h-2v3h2"/></symbol><use href="#ai:mdi:white-balance-sunny"></use>  </svg> </button> <button data-theme="theme-dark" aria-label="Dark Theme" title="Set theme to dark" class="theme-button theme-dark" data-astro-cid-lgn464si> <svg width="1em" height="1em" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:moon-and-stars">   <symbol id="ai:mdi:moon-and-stars" viewBox="0 0 24 24"><path fill="currentColor" d="m17.75 4.09l-2.53 1.94l.91 3.06l-2.63-1.81l-2.63 1.81l.91-3.06l-2.53-1.94L12.44 4l1.06-3l1.06 3zm3.5 6.91l-1.64 1.25l.59 1.98l-1.7-1.17l-1.7 1.17l.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85c-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14c.4-.4.82-.76 1.27-1.08c.75-.53 1.93.36 1.85 1.19c-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82c-2.81 3.14-2.7 7.96.31 10.98c3.02 3.01 7.84 3.12 10.98.31"/></symbol><use href="#ai:mdi:moon-and-stars"></use>  </svg> </button> </div>  </div> <button class="md:hidden cursor-pointer" id="nav-open-btn" aria-label="Open navigation menu" title="Open navigation menu"> <svg width="32" height="32" aria-hidden="true" data-icon="mdi:menu">   <symbol id="ai:mdi:menu" viewBox="0 0 24 24"><path fill="currentColor" d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></symbol><use href="#ai:mdi:menu"></use>  </svg> </button> <!-- Mobile nav --> <div class="translate-x-full md:hidden fixed top-0 right-0 bg-background dark:bg-background-dark h-screen w-5/6 px-8 py-6 transition-transform z-40 border-l-[1px] border-background" id="mobile-menu"> <button id="nav-close-btn" class="ml-auto block cursor-pointer" aria-label="Close navigation menu" title="Close navigation menu"> <svg width="32" height="32" aria-hidden="true" data-icon="mdi:close">   <symbol id="ai:mdi:close" viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"/></symbol><use href="#ai:mdi:close"></use>  </svg> </button> <div class="flex flex-col h-full items-start gap-8 pt-16"> <a href="/kinghermy-blog/" class="text-4xl font-light" data-astro-cid-rieiwi5x> Home </a> <a href="/kinghermy-blog/blog" class="text-4xl font-light" data-astro-cid-rieiwi5x> Blog </a> <a href="/kinghermy-blog/about" class="text-4xl font-light" data-astro-cid-rieiwi5x> About </a>  <div class="mt-4 border-[1px] border-foreground dark:border-foreground-dark rounded-full flex justify-center items-center text-foreground dark:text-foreground-dark [&#38;>*:hover]:brightness-75 md:opacity-80 [&#38;>*]:cursor-pointer" data-astro-cid-lgn464si> <button data-theme="theme-auto" aria-label="Auto Theme" title="Set theme to follow system preference" class="theme-button theme-auto" data-astro-cid-lgn464si> <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:brightness-auto">   <use href="#ai:mdi:brightness-auto"></use>  </svg> </button> <button data-theme="theme-light" aria-label="Light Theme" title="Set theme to light" class="theme-button theme-light" data-astro-cid-lgn464si> <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:white-balance-sunny">   <use href="#ai:mdi:white-balance-sunny"></use>  </svg> </button> <button data-theme="theme-dark" aria-label="Dark Theme" title="Set theme to dark" class="theme-button theme-dark" data-astro-cid-lgn464si> <svg width="1em" height="1em" viewBox="0 0 24 24" aria-hidden="true" data-astro-cid-lgn464si="true" class="duration-0 text-2xl md:text-xl" data-icon="mdi:moon-and-stars">   <use href="#ai:mdi:moon-and-stars"></use>  </svg> </button> </div>  </div> </div> </div> </nav> <script type="module">function e(){document.querySelector("#mobile-menu")?.classList.toggle("mobile-nav-open")}document.querySelector("#nav-open-btn")?.addEventListener("click",e);document.querySelector("#nav-close-btn")?.addEventListener("click",e);</script> </header> <script>
	function reComputeTheme() {
		if (
			localStorage.theme === 'dark' ||
			(!('theme' in localStorage) &&
				window.matchMedia('(prefers-color-scheme: dark)').matches)
		) {
			document.documentElement.classList.add('dark')
		} else {
			document.documentElement.classList.remove('dark')
		}

		const theme = localStorage.theme || 'auto'
		document
			.querySelectorAll(`[data-theme="theme-${theme}"]`)
			.forEach((el) => el.classList.add('active'))
	}

	function addThemeEventListeners() {
		themeButtons = document.querySelectorAll('.theme-button')
		themeButtons.forEach((button) => {
			button.addEventListener('click', () => {
				themeButtons.forEach((btn) => btn.classList.remove('active'))
				button.classList.add('active')
				if (button.dataset.theme === 'theme-auto') {
					localStorage.removeItem('theme')
					reComputeTheme()
				} else {
					localStorage.theme = button.dataset.theme.replace('theme-', '')
					document.documentElement.classList.toggle(
						'dark',
						button.dataset.theme === 'theme-dark'
					)
				}
			})
		})
	}

	// Set active class on OS theme change
	window
		.matchMedia('(prefers-color-scheme: dark)')
		.addEventListener('change', (_e) => {
			reComputeTheme()
		})

	// run recomputeTheme when screen crosses 768px
	window.matchMedia('(min-width: 768px)').addEventListener('change', (_e) => {
		addThemeEventListeners()
		reComputeTheme()
	})

	reComputeTheme()

	// Run on page load
	window.addEventListener('DOMContentLoaded', () => {
		addThemeEventListeners()
		reComputeTheme()
	})
</script>  <section class="app-container pt-32 pb-16 space-y-8" id="admin-root"> <div class="flex items-start justify-between gap-4"> <div class="space-y-3"> <div class="pill w-fit">Local-only</div> <h1 class="text-4xl sm:text-5xl font-black tracking-tight">
Post Builder (local)
</h1> <p class="text-lg max-w-3xl opacity-85 leading-relaxed">
Use this to draft a new blog post. It will generate a Markdown file
					with frontmatter you can download or copy, then place into
<code>src/content/blog/</code>. No content is uploaded anywhere.
</p> </div> <div class="pill">Base path: /kinghermy-blog</div> </div> <div class="grid lg:grid-cols-[2fr,1fr] gap-6"> <form id="post-form" class="card-surface rounded-2xl p-8 space-y-5" novalidate> <div class="grid md:grid-cols-2 gap-4"> <label class="space-y-2"> <span class="font-semibold">Title</span> <input name="title" required class="w-full rounded-lg border border-foreground/15 bg-white/60 dark:bg-white/5 px-4 py-3" placeholder="My next post"> </label> <label class="space-y-2"> <span class="font-semibold">Slug (optional)</span> <input name="slug" class="w-full rounded-lg border border-foreground/15 bg-white/60 dark:bg-white/5 px-4 py-3" placeholder="my-next-post"> <p class="text-sm opacity-70">
Leave empty to auto-generate from title.
</p> </label> </div> <label class="space-y-2 block"> <span class="font-semibold">Description</span> <textarea name="description" required class="w-full rounded-lg border border-foreground/15 bg-white/60 dark:bg-white/5 px-4 py-3 min-h-[120px]" placeholder="Short summary that appears on cards and RSS."></textarea> </label> <div class="grid md:grid-cols-2 gap-4"> <label class="space-y-2"> <span class="font-semibold">Publish date</span> <input name="pubDate" type="date" required class="w-full rounded-lg border border-foreground/15 bg-white/60 dark:bg-white/5 px-4 py-3"> </label> <label class="space-y-2"> <span class="font-semibold">Cover image credit (optional)</span> <input name="coverImageCredit" class="w-full rounded-lg border border-foreground/15 bg-white/60 dark:bg-white/5 px-4 py-3" placeholder="Photo by ..."> </label> </div> <label class="space-y-2 block"> <span class="font-semibold">Content (Markdown)</span> <textarea name="content" required class="w-full rounded-lg border border-foreground/15 bg-white/60 dark:bg-white/5 px-4 py-3 min-h-[260px]" placeholder="## Heading
Body text goes here..."></textarea> </label> <div class="flex flex-wrap gap-3"> <button type="submit" class="btn-primary">Generate Markdown</button> <button type="button" id="copy-btn" class="btn-secondary">
Copy to clipboard
</button> <button type="button" id="download-btn" class="btn-secondary">
Download .md
</button> </div> <p class="text-sm opacity-70">
Cover image path: place your image at
<code>src/assets/blogimages/&lt;slug&gt;/cover.jpg</code>.
</p> </form> <div class="card-surface rounded-2xl p-6 space-y-4"> <h3 class="text-2xl font-semibold">Preview</h3> <pre id="output" class="text-sm whitespace-pre-wrap bg-black/80 text-white p-4 rounded-lg min-h-[200px] overflow-auto"></pre> </div> </div> <div class="grid lg:grid-cols-3 gap-6"> <div class="card-surface rounded-2xl p-6 space-y-3 lg:col-span-2"> <h3 class="text-2xl font-semibold">Image helper</h3> <p class="opacity-80 text-sm">
Images are not uploaded here. Place them at
<code>src/assets/blogimages/&lt;slug&gt;/</code> and use the generated
					markdown snippet.
</p> <div class="grid md:grid-cols-2 gap-4"> <label class="space-y-2"> <span class="font-semibold">Image file name</span> <input id="image-name" class="w-full rounded-lg border border-foreground/15 bg-white/60 dark:bg-white/5 px-4 py-3" placeholder="cover.jpg or screenshot.png"> </label> <label class="space-y-2"> <span class="font-semibold">Alt text</span> <input id="image-alt" class="w-full rounded-lg border border-foreground/15 bg-white/60 dark:bg-white/5 px-4 py-3" placeholder="Describe the image"> </label> </div> <div class="flex flex-wrap gap-3"> <button type="button" id="image-generate" class="btn-secondary">
Generate image markdown
</button> <button type="button" id="image-copy" class="btn-secondary">
Copy snippet
</button> </div> <pre id="image-output" class="text-sm whitespace-pre bg-black/80 text-white p-3 rounded-lg min-h-[80px] overflow-auto"></pre> </div> <div class="card-surface rounded-2xl p-6 space-y-3"> <h3 class="text-2xl font-semibold">How to publish</h3> <ol class="list-decimal list-inside space-y-2 text-sm opacity-90"> <li>Fill the form and generate the markdown.</li> <li>Download it as <code>&lt;slug&gt;.md</code>.</li> <li>
Save it to <code>src/content/blog/&lt;slug&gt;.md</code> and place
<code>cover.jpg</code> at
<code>src/assets/blogimages/&lt;slug&gt;/cover.jpg</code>.
</li> <li>Run <code>npm run dev</code> to preview locally.</li> <li>Commit and push to publish via GitHub Pages.</li> </ol> <p class="text-xs opacity-70">
Direct posting from this page is not possible without a backend or
					CMS. This is a static site.
</p> </div> </div> </section>  <footer> <div class="app-container py-14"> <div class="card-surface rounded-2xl grid md:grid-cols-3 gap-12 p-10"> <div> <a href="/" class="block w-fit" aria-label="Home"> <img src="/kinghermy-blog/_astro/crown.CL6QWeZr_Z1PnrXa.webp" alt="Kinghermy logo" loading="lazy" decoding="async" fetchpriority="auto" width="36" height="36"> </a> </div> <div> <h3 class="font-semibold text-2xl">Links</h3> <div class="flex flex-wrap gap-4 mt-4"> <a class="text-lg" href="/kinghermy-blog/blog" target="_blank" rel="noopener noreferrer"> Blog </a><a class="text-lg" href="/kinghermy-blog/about" target="_blank" rel="noopener noreferrer"> About </a> <a href="rss.xml" target="_blank" rel="noopener noreferrer" class="text-lg" aria-label="RSS Feed"> <svg width="1em" height="1em" class="w-6 h-6" data-icon="mdi:rss">   <symbol id="ai:mdi:rss" viewBox="0 0 24 24"><path fill="currentColor" d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27zm0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93z"/></symbol><use href="#ai:mdi:rss"></use>  </svg> </a> </div> </div> <div> <h3 class="font-semibold text-2xl">Socials</h3> <div class="flex flex-wrap gap-4 mt-4"> <a class="text-lg" href="https://github.com/hermy10" target="_blank" rel="noopener noreferrer"> GitHub </a><a class="text-lg" href="https://www.linkedin.com/in/" target="_blank" rel="noopener noreferrer"> LinkedIn </a><a class="text-lg" href="https://twitter.com/10_hermy" target="_blank" rel="noopener noreferrer"> X / Twitter </a><a class="text-lg" href="https://instagram.com/kinghermy" target="_blank" rel="noopener noreferrer"> Instagram </a> </div> </div> </div> <div class="app-container flex justify-between items-center pb-6 text-center"> <p class="text-left md:text-center w-full">
&copy; 2025 Source code available on <a class="underline" href="https://github.com/hermy10/kinghermy-blog" target="_blank">GitHub</a> </p> </div> </div></footer> </body></html> <script>
	const ACCESS_CODE = 'kinghermy' // simple gate; change as needed

	function toSlug(text) {
		return text
			.toLowerCase()
			.trim()
			.replace(/[^a-z0-9]+/g, '-')
			.replace(/^-+|-+$/g, '')
	}

	function escapeSingleQuotes(str) {
		return str.replace(/'/g, "''")
	}

	const form = document.getElementById('post-form')
	const output = document.getElementById('output')
	const copyBtn = document.getElementById('copy-btn')
	const downloadBtn = document.getElementById('download-btn')
	const adminRoot = document.getElementById('admin-root')

	const imageName = document.getElementById('image-name')
	const imageAlt = document.getElementById('image-alt')
	const imageGenerate = document.getElementById('image-generate')
	const imageCopy = document.getElementById('image-copy')
	const imageOutput = document.getElementById('image-output')

	let latestContent = ''

	function buildMarkdown(data) {
		const slug = data.slug || toSlug(data.title)
		const date = data.pubDate || new Date().toISOString().slice(0, 10)

		const frontmatterLines = [
			'---',
			`title: '${escapeSingleQuotes(data.title)}'`,
			'description: |',
			`  ${data.description.trim().replace(/\n/g, '\n  ')}`,
			`pubDate: '${date}'`,
		]

		if (data.coverImageCredit) {
			frontmatterLines.push(
				`coverImageCredit: '${escapeSingleQuotes(data.coverImageCredit)}'`
			)
		}

		frontmatterLines.push('---')

		const body = data.content.trim()
		const content = `${frontmatterLines.join('\n')}\n\n${body}\n`
		return { content, slug }
	}

	function setOutput(text) {
		output.textContent = text
		latestContent = text
	}

	function getFormData() {
		const formData = new FormData(form)
		return {
			title: (formData.get('title') || '').toString(),
			slug: (formData.get('slug') || '').toString(),
			description: (formData.get('description') || '').toString(),
			pubDate: (formData.get('pubDate') || '').toString(),
			coverImageCredit: (formData.get('coverImageCredit') || '').toString(),
			content: (formData.get('content') || '').toString(),
		}
	}

	function updatePreview() {
		const data = getFormData()
		if (!data.title || !data.description || !data.content) {
			setOutput('Fill title, description, and content to see preview.')
			return
		}
		const { content } = buildMarkdown(data)
		setOutput(content)
	}

	form?.addEventListener('submit', (event) => {
		event.preventDefault()
		updatePreview()
	})

	copyBtn?.addEventListener('click', () => {
		updatePreview()
		if (!latestContent) {
			setOutput('Please generate content first.')
			return
		}
		navigator.clipboard?.writeText(latestContent)
		setOutput('Copied to clipboard.\n\n' + latestContent)
	})

	downloadBtn?.addEventListener('click', () => {
		updatePreview()
		const data = getFormData()
		const { content, slug } = buildMarkdown(data)
		const blob = new Blob([content], { type: 'text/markdown' })
		const url = URL.createObjectURL(blob)
		const a = document.createElement('a')
		a.href = url
		a.download = `${slug || 'new-post'}.md`
		document.body.appendChild(a)
		a.click()
		document.body.removeChild(a)
		URL.revokeObjectURL(url)
		setOutput('Downloaded markdown file.\n\n' + content)
	})

	form?.addEventListener('input', () => {
		updatePreview()
	})

	imageGenerate?.addEventListener('click', () => {
		const slugInput = document.querySelector('[name="slug"]')
		const titleInput = document.querySelector('[name="title"]')
		const slug = (slugInput?.value || toSlug(titleInput?.value || '')).trim()
		const name = (imageName?.value || 'image.jpg').trim()
		const alt = (imageAlt?.value || 'Image').trim()
		if (!slug) {
			imageOutput.textContent = 'Add a title or slug first.'
			return
		}
		const snippet = `![${alt}](../../assets/blogimages/${slug}/${name})`
		imageOutput.textContent = snippet
	})

	imageCopy?.addEventListener('click', () => {
		if (!imageOutput.textContent) {
			imageOutput.textContent = 'Generate snippet first.'
			return
		}
		navigator.clipboard?.writeText(imageOutput.textContent)
		imageOutput.textContent = 'Copied.\n' + imageOutput.textContent
	})

	// Simple client-side gate (not secure; local-only)
	function requireAccess() {
		const hasAccess =
			localStorage.getItem('adminAccessGranted') === 'true' ||
			ACCESS_CODE === ''
		if (hasAccess) {
			adminRoot?.classList.remove('blur-sm', 'pointer-events-none')
			return
		}
		const code = prompt('Enter admin access code')
		if (code === ACCESS_CODE) {
			localStorage.setItem('adminAccessGranted', 'true')
			adminRoot?.classList.remove('blur-sm', 'pointer-events-none')
		} else {
			alert('Incorrect code. Reload to try again.')
			adminRoot?.classList.add('blur-sm', 'pointer-events-none')
		}
	}

	requireAccess()
</script>